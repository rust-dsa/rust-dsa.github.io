<!DOCTYPE HTML>
<html lang="en" class="ayu" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Building a Linked list - Data Structures and Algorithms in Rust</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('ayu')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../what_is_dsa/what_is_dsa.html"><strong aria-hidden="true">1.</strong> What is DSA?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../what_is_dsa/data_structures.html"><strong aria-hidden="true">1.1.</strong> Data Structures</a></li><li class="chapter-item expanded "><a href="../what_is_dsa/algorithms.html"><strong aria-hidden="true">1.2.</strong> Algorithms</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Data Structures</li><li class="chapter-item expanded "><a href="../complexity/complexity.html"><strong aria-hidden="true">2.</strong> Complexity</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../complexity/time_complexity.html"><strong aria-hidden="true">2.1.</strong> Time Complexity</a></li><li class="chapter-item expanded "><a href="../complexity/space_complexity.html"><strong aria-hidden="true">2.2.</strong> Space Complexity</a></li></ol></li><li class="chapter-item expanded "><a href="../array/array.html"><strong aria-hidden="true">3.</strong> Array</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../array/primitive.html"><strong aria-hidden="true">3.1.</strong> Primitive type</a></li><li class="chapter-item expanded "><a href="../array/vector.html"><strong aria-hidden="true">3.2.</strong> Vector type</a></li><li class="chapter-item expanded "><a href="../array/array_or_vector.html"><strong aria-hidden="true">3.3.</strong> Array or Vector?</a></li><li class="chapter-item expanded "><a href="../array/helpful_methods.html"><strong aria-hidden="true">3.4.</strong> Problem solving Preparation</a></li><li class="chapter-item expanded "><a href="../array/problem_sets.html"><strong aria-hidden="true">3.5.</strong> Problem sets</a></li></ol></li><li class="chapter-item expanded "><a href="../string/string.html"><strong aria-hidden="true">4.</strong> String</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../string/string_slice.html"><strong aria-hidden="true">4.1.</strong> &str</a></li><li class="chapter-item expanded "><a href="../string/string_struct.html"><strong aria-hidden="true">4.2.</strong> String</a></li><li class="chapter-item expanded "><a href="../string/helpful_medhods.html"><strong aria-hidden="true">4.3.</strong> Problem solving Preparation</a></li><li class="chapter-item expanded "><a href="../string/problem_sets.html"><strong aria-hidden="true">4.4.</strong> Problem sets</a></li></ol></li><li class="chapter-item expanded "><a href="../stack/stack.html"><strong aria-hidden="true">5.</strong> Stack</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../stack/problem_sets.html"><strong aria-hidden="true">5.1.</strong> Problem sets</a></li></ol></li><li class="chapter-item expanded "><a href="../queue/queue.html"><strong aria-hidden="true">6.</strong> Queue</a></li><li class="chapter-item expanded "><a href="../linked_list/linked_list.html"><strong aria-hidden="true">7.</strong> Linked list</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../linked_list/what_you_came_for.html"><strong aria-hidden="true">7.1.</strong> What you came for</a></li><li class="chapter-item expanded "><a href="../linked_list/building_a_node.html"><strong aria-hidden="true">7.2.</strong> Building a Node</a></li><li class="chapter-item expanded "><a href="../linked_list/building_a_linked_list.html" class="active"><strong aria-hidden="true">7.3.</strong> Building a Linked list</a></li></ol></li><li class="chapter-item expanded "><a href="../trees/trees.html"><strong aria-hidden="true">8.</strong> Trees</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../trees/binary_tree.html"><strong aria-hidden="true">8.1.</strong> Binary tree</a></li><li class="chapter-item expanded "><a href="../trees/binary_search_tree.html"><strong aria-hidden="true">8.2.</strong> Binary search tree</a></li></ol></li><li class="chapter-item expanded "><a href="../hashmap/hashmap.html"><strong aria-hidden="true">9.</strong> Hash map</a></li><li class="chapter-item expanded "><a href="../heap/heap.html"><strong aria-hidden="true">10.</strong> Heap</a></li><li class="chapter-item expanded "><a href="../graph/graph.html"><strong aria-hidden="true">11.</strong> Graph</a></li><li class="chapter-item expanded "><a href="../trie/trie.html"><strong aria-hidden="true">12.</strong> Trie</a></li><li class="chapter-item expanded affix "><li class="part-title">Algorithms</li><li class="chapter-item expanded "><a href="../algorithms/recursion/recursion.html"><strong aria-hidden="true">13.</strong> Recursion</a></li><li class="chapter-item expanded "><a href="../algorithms/divide_and_conquer/divide_and_conquer.html"><strong aria-hidden="true">14.</strong> Divide and Conquer</a></li><li class="chapter-item expanded "><a href="../algorithms/search_algorithms/search_algorithms.html"><strong aria-hidden="true">15.</strong> Search algorithms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../algorithms/search_algorithms/linear_search.html"><strong aria-hidden="true">15.1.</strong> Linear search</a></li><li class="chapter-item expanded "><a href="../algorithms/search_algorithms/binary_search.html"><strong aria-hidden="true">15.2.</strong> Binary search</a></li></ol></li><li class="chapter-item expanded "><a href="../algorithms/sorting_algorithms/sorting_algorithms.html"><strong aria-hidden="true">16.</strong> Sorting algorithms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../algorithms/sorting_algorithms/bubble_sort.html"><strong aria-hidden="true">16.1.</strong> Bubble sort</a></li><li class="chapter-item expanded "><a href="../algorithms/sorting_algorithms/selection_sort.html"><strong aria-hidden="true">16.2.</strong> Selection sort</a></li><li class="chapter-item expanded "><a href="../algorithms/sorting_algorithms/insertion_sort.html"><strong aria-hidden="true">16.3.</strong> Insertion sort</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Data Structures and Algorithms in Rust</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/abdulshaikh55/abdulshaikh55.github.io/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="building-a-linked-list"><a class="header" href="#building-a-linked-list">Building a linked list</a></h1>
<p>Now it's time to link Nodes together to create a simple linked list!</p>
<h3 id="creating-a-head-node"><a class="header" href="#creating-a-head-node">Creating a Head Node</a></h3>
<p>We'll store the address of head node in <code>Box</code> pointer, and initialize a node.</p>
<pre><code class="language-rust ignore">let head = Box::new(Node {
    val: 1,
    next: None
});</code></pre>
<h3 id="linking-a-node"><a class="header" href="#linking-a-node">Linking a node</a></h3>
<p>Here, we create a head pointer that points to Node that contains <code>val = 1</code> and is not linked to next Node.
The next step is to link one more node to our list. We do this by updating the value of <code>next</code> to that of the newly created node.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    let mut head = Box::new(Node {
        val: 1,
        next: None
    });
    let node = Some(Box::new(Node {
        val: 2,
        next: None
    }));

    head.next = node;

    println!("{:?}", head);
<span class="boring">}</span></code></pre></pre>
<p>We can also link another node, but before we do that, let's write a method for <code>Node</code> that will help us initialize a node.</p>
<h3 id="important-methods"><a class="header" href="#important-methods">Important Methods</a></h3>
<h4 id="new"><a class="header" href="#new"><code>new</code></a></h4>
<pre><code class="language-rust ignore">impl Node {
    fn new(val: i32) -&gt; Option&lt;Box&lt;Node&gt;&gt; {
        Some(Box::new(Node { val, next: None }))
    }
}</code></pre>
<p>We'll create a node using our new method. Since, we cannot directly assign this value to head as it will overwrite the address of the previous node. We will have to access <code>node</code> through head and then link the new node to the previous node. We first check if the pattern matches of head node, i.e., if it hold Some value or None. Next we'll borrow the inner value of Some mutably. This will allows us ot modify the contents of <code>next_node</code>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    let new_node: Option&lt;Box&lt;Node&gt;&gt; = Node::new(3);

    if let Some(ref mut next_node) = head.next {
        next_node.next = new_node;
    }
    println!("{:?}", head);
<span class="boring">}</span></code></pre></pre>
<h4 id="push"><a class="header" href="#push"><code>push</code></a></h4>
<p>Do you see the pattern for inserting a node in a linked list? Let's articulate it:</p>
<ol>
<li>Start at the head node of the linked list.</li>
<li>Traverse the list:
<ul>
<li>Check if the current node's <code>next</code> is <code>None</code>.</li>
<li>If not, move to the next node by reassigning the current node to its <code>next</code>.</li>
</ul>
</li>
<li>Continue until you find a node where <code>node.next</code> is <code>None</code> (the last node).</li>
<li>Create a new node with the desired value and set the <code>next</code> of the last node to point to this new node.</li>
</ol>
<p>Let's try to write this algorithm by creating the <code>insert</code> method</p>
<pre><code class="language-rust ignore">    fn push(&amp;mut self, new_node: Option&lt;Box&lt;Node&gt;&gt;) {
        let mut current = self;
        while let Some(ref mut next) = current.next {
            current = next;
        }
        current.next = new_node;
    }</code></pre>
<h4 id="print_list"><a class="header" href="#print_list"><code>print_list</code></a></h4>
<p>We'll create a method that helps us traverse through the list.
Since the method is part of <code>struct Node</code> and not <code>Option&lt;Box&lt;Node&gt;&gt;</code>, we'll turn it into an Option, so that it is easier to access through <code>while let</code> loop. Then using said loop, we'll access <code>val</code> and print it, and then assign <code>next</code> as current node.</p>
<pre><code class="language-rust ignore">fn print_list(&amp;self) {
    let mut current = Some(self);
        while let Some(node) = current {
            print!("{} -&gt; ", node.val);
            current = node.next.as_deref();
        }
        println!("None");
    }</code></pre>
<blockquote>
<p>The <code>node.next</code> is of type <code>Option&lt;Box&lt;Node&gt;&gt;</code>, but <code>current</code> is expected to be of type <code>Option&lt;&amp;Node&gt;</code>. Without <code>as_deref()</code>, you can't directly assign <code>node.next</code> to <code>current</code> because they are different types.</p>
</blockquote>
<h4 id="remove_last"><a class="header" href="#remove_last"><code>remove_last</code></a></h4>
<p>The idea is simple: unlink the last node with the second last node.</p>
<pre><code class="language-rust ignore">fn remove_last(&amp;mut self) {
    if self.next.is_none() {
        // If the list is empty or has only one node
        return;
    }

    let mut current = self;
    while let Some(ref mut next) = current.next {
        if next.next.is_none() {
            // We found the second last node
            current.next = None; // Unlink the last node
            return;
        }
        current = next;
    }
}</code></pre>
<p>Alright, now that we have written a function that creates, reads, updates and deletes a list node, we'll move on to the next step of design: optimization.</p>
<p>Let's take a look at the code we've written so far:</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
#[allow(dead_code)]
struct Node {
    val: i32,
    next: Option&lt;Box&lt;Node&gt;&gt;,
}

impl Node {
    fn new(val: i32) -&gt; Option&lt;Box&lt;Node&gt;&gt; {
        Some(Box::new(Node { val, next: None }))
    }

    fn push(&amp;mut self, new_node: Option&lt;Box&lt;Node&gt;&gt;) {
        let mut current = self;
        while let Some(ref mut next) = current.next {
            current = next;
        }
        current.next = new_node;
    }

    fn print_list(&amp;self) {
        let mut current = Some(self);
        while let Some(node) = current {
            print!("{} -&gt; ", node.val);
            current = node.next.as_deref();
        }
        println!("None"); // Indicate the end of the list
    }
}

fn main() {
    let mut head = Box::new(Node { val: 1, next: None });
    let node = Some(Box::new(Node { val: 2, next: None }));

    head.next = node;

    let new_node = Node::new(3);

    head.push(new_node);

    println!("{:?}", head);

    head.push(Node::new(4));

    head.print_list();
}</code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../linked_list/building_a_node.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../trees/trees.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../linked_list/building_a_node.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../trees/trees.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
